<form #msgForm="ngForm" class="flex gap-2 items-center" (ngSubmit)="sendMessage()">
  <input type="text" class="flex-1 p-2 border rounded-lg" placeholder="Type a message..." [(ngModel)]="message" name="messageInput" required (input)="onInput()" />
  <input type="file" accept="image/*" #imageInput hidden (change)="onImageSelected($event)" />
  <button
    type="button"
    (click)="imageInput.click()"
    pButton
    class="p-2 bg-white rounded-full hover:bg-gray-100 transition"
    aria-label="Attach image"
    title="Attach image"
  >
    <i class="pi pi-image text-xl text-gray-500"></i>
  </button>
  <input type="file" accept="audio/*" #voiceInput hidden (change)="onVoiceSelected($event)" />
  <button type="button" (click)="voiceInput.click()" pButton class="p-2 bg-white rounded-full hover:bg-gray-100 transition" aria-label="Send voice" title="Send voice">
    <i class="pi pi-microphone text-xl text-gray-500"></i>
  </button>
  <button type="button" (click)="toggleRecording()" pButton class="p-2 bg-white rounded-full hover:bg-gray-100 transition" [class.bg-red-200]="isRecording" aria-label="Record" title="Record">
    <i *ngIf="!isRecording" class="pi pi-circle-on text-xl text-gray-500"></i>
    <i *ngIf="isRecording" class="pi pi-stop-circle text-xl text-red-500"></i>
  </button>
  <span *ngIf="isRecording" class="text-red-500 text-xs ml-2 animate-pulse">Recording...</span>
  <button class="bg-pink-600 text-white px-4 py-2 rounded-lg font-semibold" type="submit">Send</button>
</form>
